<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frostware¬Æ</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/logo.css">
</head>

<body class="bg-white text-gray-800">

    <!-- Header (fallback est√°tico; JS lo hidrata/actualiza) -->
    <header id="main-header" class="dark-header bg-gray-900/90 backdrop-blur-md sticky top-0 z-50 border-b border-gray-700 text-white" style="opacity: 0;">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="flex items-center">
                <div class="logo-icon mr-2">
                    <div class="arc-1"></div>
                    <div class="arc-2"></div>
                </div>
                <a class="text-white text-xl font-bold" href="#/">Frostware</a>
            </div>
            <div class="hidden md:flex items-center space-x-1">
                <!-- Placeholder for nav links -->
                <div class="animate-pulse bg-gray-700 h-6 w-16 rounded mx-2"></div>
                <div class="animate-pulse bg-gray-700 h-6 w-16 rounded mx-2"></div>
                <div class="animate-pulse bg-gray-700 h-6 w-16 rounded mx-2"></div>
                <div class="animate-pulse bg-gray-700 h-6 w-16 rounded mx-2"></div>
                <div class="animate-pulse bg-gray-700 h-6 w-16 rounded mx-2"></div>
            </div>
            <div class="flex items-center space-x-4">
                <!-- Placeholder for Lang Selector + User/Auth -->
                <div class="animate-pulse bg-gray-700 h-8 w-16 rounded"></div>
                <div class="animate-pulse bg-gray-700 h-8 w-32 rounded"></div>
            </div>
        </nav>
    </header>

    <!-- SPA root (views se renderizan aqu√≠) -->
    <div id="spa-root"></div>

    <main id="main-content">
        <section id="inicio" class="hero-bg py-20 md:py-32">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold text-gray-900 leading-tight fade-in-down"
                    data-translate-key="hero_title">
                    <span>El software no es el l√≠mite.</span> <br class="hidden md:block">
                    <span class="text-[#22a7d0] neon-text">Es el punto de partida.</span>
                </h1>
                <p class="mt-6 text-lg md:text-xl text-gray-600 max-w-3xl mx-auto fade-in-up"
                    data-translate-key="hero_subtitle">
                    En Frostware¬Æ, creamos herramientas, cursos y simuladores de vanguardia dise√±ados para eliminar la
                    fricci√≥n entre tu visi√≥n y su ejecuci√≥n. Potencia tu creatividad, optimiza tu trabajo y domina
                    nuevas habilidades.
                </p>
                <div class="mt-10">
                    <a href="#/products"
                        class="cta-button bg-[#22a7d0] text-white font-bold py-4 px-10 rounded-lg text-lg shadow-lg fade-in-up btn-pulse"
                        data-translate-key="hero_cta">
                        Explora Nuestras Herramientas
                    </a>
                </div>
            </div>
        </section>

        <!-- Featured Products Section -->
        <section id="productos-destacados" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-sm font-bold uppercase text-[#22a7d0]"
                        data-translate-key="featured_products_tagline">Productos Destacados</h2>
                    <p class="section-title text-3xl md:text-4xl mt-2" data-translate-key="featured_products_title">
                        Nuestros √öltimos Productos</p>
                    <div class="mt-4">
                        <span
                            class="inline-block bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-medium"
                            data-translate-key="featured_products_update">
                            √öltima actualizaci√≥n: Diciembre 2024
                        </span>
                    </div>
                </div>
                <div id="latest-products" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 p-4">
                    <!-- Los productos se cargar√°n din√°micamente aqu√≠ -->
                </div>

                <div class="text-center mt-12">
                    <a href="#/products"
                        class="inline-flex items-center px-6 py-3 bg-white border border-[#22a7d0] text-[#22a7d0] font-semibold rounded-lg hover:bg-[#22a7d0] hover:text-white transition-colors">
                        Ver Todos los Productos
                        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7">
                            </path>
                        </svg>
                    </a>
                </div>
        </section>

        <!-- Stats Section -->
        <section class="py-20 bg-gray-900">
            <div class="container mx-auto px-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="fade-in-up">
                        <p class="text-4xl md:text-5xl font-extrabold text-[#22a7d0] neon-text">4</p>
                        <p class="mt-2 text-lg text-gray-300" data-translate-key="stats_apps">Aplicaciones Disponibles
                        </p>
                    </div>
                    <div class="fade-in-up" style="transition-delay: 0.2s">
                        <p class="text-4xl md:text-5xl font-extrabold text-[#22a7d0] neon-text">342</p>
                        <p class="mt-2 text-lg text-gray-300" data-translate-key="stats_users">Usuarios Activos</p>
                    </div>
                    <div class="fade-in-up" style="transition-delay: 0.4s">
                        <p class="text-4xl md:text-5xl font-extrabold text-[#22a7d0] neon-text">95%</p>
                        <p class="mt-2 text-lg text-gray-300" data-translate-key="stats_satisfaction">Satisfacci√≥n</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonios" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-sm font-bold uppercase text-[#22a7d0]" data-translate-key="testimonials_tagline">
                        Testimonios</h2>
                    <p class="section-title text-3xl md:text-4xl mt-2" data-translate-key="testimonials_title">Lo que
                        dicen nuestros usuarios</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <!-- Testimonial 1 -->
                    <div
                        class="bg-white/80 backdrop-blur-sm p-8 rounded-lg border border-gray-200 flex flex-col items-center hover-neon-glow fade-in-scale">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg"
                            class="w-24 h-24 rounded-full mb-4 border-4 border-white shadow-lg"
                            alt="Usuario Carlos Rodr√≠guez">
                        <div class="flex items-center mb-4 text-amber-500">
                            <!-- Stars -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                        </div>
                        <p class="text-gray-600 italic" data-translate-key="testimonial1_content">"FocusFlow ha
                            transformado mi productividad. Es simple, potente y exactamente lo que necesitaba para
                            mantenerme enfocado."</p>
                        <p class="mt-4 font-bold">- <span data-translate-key="testimonial1_name">Carlos Rodr√≠guez</span>
                        </p>
                        <p class="text-sm text-gray-500" data-translate-key="testimonial1_title">Desarrollador de
                            Software</p>
                    </div>
                    <!-- Testimonial 2 -->
                    <div class="bg-white/80 backdrop-blur-sm p-8 rounded-lg border border-gray-200 flex flex-col items-center hover-neon-glow fade-in-scale"
                        style="transition-delay: 0.2s">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg"
                            class="w-24 h-24 rounded-full mb-4 border-4 border-white shadow-lg" alt="Usuario Ana G√≥mez">
                        <div class="flex items-center mb-4 text-amber-500">
                            <!-- Stars -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                        </div>
                        <p class="text-gray-600 italic" data-translate-key="testimonial2_content">"La Gu√≠a de Vuelo
                            Simulado es incre√≠blemente detallada. He aprendido m√°s en una semana que en meses de ver
                            videos."</p>
                        <p class="mt-4 font-bold">- <span data-translate-key="testimonial2_name">Ana G√≥mez</span></p>
                        <p class="text-sm text-gray-500" data-translate-key="testimonial2_title">Piloto Estudiante</p>
                    </div>
                    <!-- Testimonial 3 -->
                    <div class="bg-white/80 backdrop-blur-sm p-8 rounded-lg border border-gray-200 flex flex-col items-center hover-neon-glow fade-in-scale"
                        style="transition-delay: 0.4s">
                        <img src="https://randomuser.me/api/portraits/men/86.jpg"
                            class="w-24 h-24 rounded-full mb-4 border-4 border-white shadow-lg"
                            alt="Usuario David Chen">
                        <div class="flex items-center mb-4 text-amber-500">
                            <!-- Stars -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                fill="currentColor">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                        </div>
                        <p class="text-gray-600 italic" data-translate-key="testimonial3_content">"CodeSynth AI es el
                            compa√±ero de programaci√≥n que siempre quise. Me ahorra horas de trabajo cada d√≠a."</p>
                        <p class="mt-4 font-bold">- <span data-translate-key="testimonial3_name">David Chen</span></p>
                        <p class="text-sm text-gray-500" data-translate-key="testimonial3_title">Ingeniero Full-Stack
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-[#22a7d0]">
            <div class="container mx-auto px-6 py-20 text-center">
                <h2 class="text-3xl md:text-4xl font-extrabold text-white" data-translate-key="cta_title">¬øListo para
                    dar el siguiente paso?</h2>
                <p class="mt-4 text-lg text-white/90 max-w-2xl mx-auto" data-translate-key="cta_subtitle">
                    √önete a miles de creadores y profesionales que ya est√°n construyendo el futuro, aprendiendo m√°s
                    r√°pido y trabajando de forma m√°s inteligente con las herramientas de Frostware¬Æ.
                </p>
                <div class="mt-8">
                    <a href="#/products"
                        class="cta-button bg-white text-[#22a7d0] font-bold py-4 px-10 rounded-lg text-lg shadow-lg"
                        data-translate-key="cta_button">
                        Ver Todos los Productos
                    </a>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-900 text-white"></footer>

    <!-- Modal del Carrito -->
    <div id="cart-modal" class="fixed inset-0 z-[110] hidden items-center justify-center bg-black bg-opacity-50">
        <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full m-4 max-h-[80vh] overflow-hidden">
            <div class="p-6 border-b flex justify-between items-center">
                <h2 class="text-2xl font-bold">Carrito de Compras</h2>
                <button id="cart-close-button" class="text-gray-400 hover:text-gray-600 text-3xl">&times;</button>
            </div>
            <div id="cart-content" class="p-6 max-h-[50vh] overflow-y-auto">
                <div id="cart-empty" class="text-center py-8 text-gray-500">
                    <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor"
                        viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 3h2l.4 2M7 13h10l4-8H5.4m-2.4 8L5 21h14a2 2 0 002-2V9H5m0 4v6a2 2 0 002 2h10a2 2 0 002-2v-6M9 21v-2m6 2v-2">
                        </path>
                    </svg>
                    <p class="text-lg">Tu carrito est√° vac√≠o</p>
                </div>
                <div id="cart-items" class="space-y-4"></div>
            </div>
            <div id="cart-footer" class="p-6 border-t bg-gray-50">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-xl font-bold">Total: $<span id="cart-total">0.00</span></span>
                </div>
                <div class="flex space-x-4">
                    <button id="clear-cart"
                        class="flex-1 bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600 transition-colors">
                        Limpiar Carrito
                    </button>
                    <button id="process-payment"
                        class="flex-1 bg-[#22a7d0] text-white py-3 px-6 rounded-lg hover:bg-[#1e96bc] transition-colors">
                        Procesar Pago
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para la Gu√≠a -->
    <div id="guideModal" class="fixed inset-0 z-[100] hidden items-center justify-center bg-black bg-opacity-50">
        <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full m-4">
            <div class="p-6 border-b flex justify-between items-center">
                <h2 id="guideTitle" class="text-2xl font-bold"></h2>
                <button id="modalCloseButton" class="text-gray-400 hover:text-gray-600 text-3xl">&times;</button>
            </div>
            <div id="guideContent" class="p-8 max-h-[70vh] overflow-y-auto"></div>
        </div>
    </div>


    <script>
        // Products are now loaded via the i18n system in homepage-i18n.js

        // Inicializar carrito cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', async () => {
            // Importar y inicializar el carrito
            try {
                await import('./src/js/cart.js');
                // Inicializar botones de productos despu√©s de un breve delay
                setTimeout(initializeHomeProductButtons, 500);

                // Fallback para el bot√≥n del carrito en caso de que no se inicialice
                setTimeout(() => {
                    const cartButton = document.getElementById('cart-button');
                    if (cartButton && !cartButton.onclick) {
                        cartButton.addEventListener('click', () => {
                            if (window.cart) {
                                window.cart.openCart();
                            }
                        });
                        console.log('Fallback cart button event added');
                    }
                }, 1000);
            } catch (error) {
                console.error('Error loading cart:', error);
            }
        });

        // Funci√≥n para inicializar botones de productos en la p√°gina de inicio
        window.initializeHomeProductButtons = async function initializeHomeProductButtons() {
            // Mark that we're initializing to prevent automatic actions
            window.isPageInitializing = true;

            // Wait for cart to be initialized
            if (!window.cart) {
                setTimeout(initializeHomeProductButtons, 100);
                return;
            }

            // Force reload user purchased products to ensure latest state
            await window.cart.loadUserPurchasedProducts();

            const productButtons = document.querySelectorAll('.product-action-button');

            for (const button of productButtons) {
                const productData = JSON.parse(button.getAttribute('data-product'));
                const productId = button.getAttribute('data-product-id');

                // Check states
                const isPurchased = window.cart.isProductPurchased(productId);
                const inCart = window.cart.isProductInCart(productId);

                if (isPurchased) {
                    button.textContent = 'Ya lo tienes';
                    button.disabled = true;
                    button.classList.remove('bg-[#22a7d0]', 'hover:bg-[#1e96bc]');
                    button.classList.add('bg-gray-400', 'cursor-not-allowed');
                    continue;
                } else if (inCart) {
                    // Free products should never be in cart - they go directly to library
                    // Only paid products should be in cart showing "Remove from Cart"
                    if (productData.price === 0 || productData.price === "Gratis") {
                        // If a free product somehow ended up in cart, remove it and show normal button
                        window.cart.removeFromCart(productId);
                        button.textContent = 'Obtener Gratis';
                    } else {
                        // For paid products in cart, show "Remove from Cart"
                        button.textContent = 'Remover del Carrito';
                        button.classList.remove('bg-[#22a7d0]', 'hover:bg-[#1e96bc]');
                        button.classList.add('bg-orange-500', 'hover:bg-orange-600');
                    }
                }

                // Add click event for free products
                button.addEventListener('click', async function (e) {
                    // Only process trusted events (real user clicks)
                    if (!e.isTrusted) {
                        console.log('üö´ Ignoring untrusted click event on', productData.id);
                        return;
                    }

                    // CRITICAL: Never auto-process products during initialization or language changes
                    if (Date.now() - window.pageLoadTime < 15000 || window.isPageInitializing) {
                        console.log('üö´ Ignoring click during page load on', productData.id);
                        return;
                    }

                    // Additional safety: Only process if user has explicitly clicked (no automatic triggers)
                    if (!e.clientX && !e.clientY) {
                        console.log('üö´ Ignoring programmatic click without coordinates on', productData.id);
                        return;
                    }

                    e.preventDefault();
                    e.stopPropagation();

                    // Import auth from firebase
                    const { auth } = await import('./src/js/firebase.js');
                    const { addUserProduct } = await import('./src/js/userProfile.js');

                    if (!auth?.currentUser) {
                        window.cart.showToast('Debes iniciar sesi√≥n para obtener productos', 'error');
                        window.location.hash = '#/auth';
                        return;
                    }

                    const originalText = this.textContent;
                    this.disabled = true;
                    this.textContent = 'Procesando...';
                    this.classList.add('opacity-75');

                    try {
                        await addUserProduct(auth.currentUser.uid, {
                            ...productData,
                            purchaseDate: new Date().toISOString()
                        });

                        this.textContent = '‚úÖ ¬°Agregado!';
                        this.classList.remove('bg-[#22a7d0]', 'opacity-75');
                        this.classList.add('bg-green-500');

                        window.cart.showToast('Producto agregado a tu biblioteca', 'success');

                        // Update button state
                        setTimeout(() => {
                            this.textContent = 'Ya lo tienes';
                            this.classList.remove('bg-green-500');
                            this.classList.add('bg-gray-400', 'cursor-not-allowed');
                            this.disabled = true;
                        }, 2000);

                        // Reload user products
                        await window.cart.loadUserPurchasedProducts();

                        // Update all product buttons
                        window.cart.updateAllProductButtons();

                    } catch (error) {
                        console.error('Error adding free product:', error);
                        this.textContent = '‚ùå Error';
                        this.classList.add('bg-red-500');
                        window.cart.showToast('Error al agregar producto', 'error');

                        setTimeout(() => {
                            this.textContent = originalText;
                            this.className = 'mt-auto product-action-button text-center bg-[#22a7d0] text-white font-bold py-2 px-4 rounded-lg transition-colors hover:bg-[#1e96bc]';
                            this.disabled = false;
                        }, 2000);
                    }
                });
            }

            // Clear initialization flag after all buttons are set up
            setTimeout(() => {
                window.isPageInitializing = false;
                console.log('‚úÖ Page initialization complete - user interactions now allowed');
            }, 1000);
        }
    </script>
    <style>
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .product-card {
            overflow: hidden;
        }

        .product-card img {
            margin: 0;
            padding: 0;
            display: block;
        }
    </style>
    <script type="module" src="/src/js/main.js"></script>
</body>

</html>